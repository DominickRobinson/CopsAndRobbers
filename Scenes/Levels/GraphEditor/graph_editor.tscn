[gd_scene load_steps=8 format=3 uid="uid://c086hshnh55j5"]

[ext_resource type="Script" path="res://Scenes/Levels/GraphEditor/graph_editor.gd" id="1_8o4cl"]
[ext_resource type="ButtonGroup" uid="uid://b8f4ld5haadn7" path="res://Scenes/Levels/GraphEditor/graph_editor_mode_button_group.tres" id="2_mtsu3"]
[ext_resource type="PackedScene" uid="uid://drysmthmgro6c" path="res://Autoloads/Pause/PauseButton.tscn" id="3_fkwqj"]
[ext_resource type="PackedScene" uid="uid://drpi6jihu1vex" path="res://Scenes/Parts/graph.tscn" id="4_lemyg"]
[ext_resource type="Script" path="res://Scenes/Levels/GraphEditor/VertexSpawnPosition.gd" id="5_3ulu6"]
[ext_resource type="PackedScene" uid="uid://bm7gd48dg50ke" path="res://Scenes/music_player.tscn" id="6_vbmlc"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_nxaq5"]

[node name="GraphEditor" type="Node2D" node_paths=PackedStringArray("graph", "vertex_spawn_position", "add_vertex_button", "selected_label", "vertex_mode_button", "edge_mode_button", "new_edge_line", "corner_spinbox", "title_text_edit", "author_text_edit", "description_text_edit", "citation_text_edit", "save_file_dialog", "load_file_dialog")]
script = ExtResource("1_8o4cl")
graph = NodePath("Graph")
vertex_spawn_position = NodePath("VertexSpawnPosition")
add_vertex_button = NodePath("GUI/MarginContainer/HBoxContainer/Buttons/AddVertex")
selected_label = NodePath("GUI/MarginContainer/SelectedLabel")
vertex_mode_button = NodePath("GUI/MarginContainer/HBoxContainer/Mode/VertexMode")
edge_mode_button = NodePath("GUI/MarginContainer/HBoxContainer/Mode/EdgeMode")
new_edge_line = NodePath("NewEdgeLine")
corner_spinbox = NodePath("GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer/AddCorner/HBoxContainer/SpinBox")
title_text_edit = NodePath("GUI/MarginContainer/VBoxContainer/TabContainer/Text/TextSidebar/TitleTextEdit")
author_text_edit = NodePath("GUI/MarginContainer/VBoxContainer/TabContainer/Text/TextSidebar/AuthorTextEdit")
description_text_edit = NodePath("GUI/MarginContainer/VBoxContainer/TabContainer/Text/TextSidebar/DescriptionTextEdit")
citation_text_edit = NodePath("GUI/MarginContainer/VBoxContainer/TabContainer/Text/TextSidebar/CitationTextEdit")
save_file_dialog = NodePath("SaveFileDialog")
load_file_dialog = NodePath("LoadFileDialog")

[node name="GUI" type="CanvasLayer" parent="."]

[node name="MarginContainer" type="MarginContainer" parent="GUI"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/margin_left = 25
theme_override_constants/margin_top = 25
theme_override_constants/margin_right = 25
theme_override_constants/margin_bottom = 25

[node name="HBoxContainer" type="HBoxContainer" parent="GUI/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 0
alignment = 2
metadata/_edit_use_anchors_ = true

[node name="Buttons" type="HBoxContainer" parent="GUI/MarginContainer/HBoxContainer"]
layout_mode = 2

[node name="AddVertex" type="Button" parent="GUI/MarginContainer/HBoxContainer/Buttons"]
layout_mode = 2
text = "Add vertex"

[node name="Refresh" type="Button" parent="GUI/MarginContainer/HBoxContainer/Buttons"]
visible = false
layout_mode = 2
text = "Refresh"

[node name="HSeparator" type="HSeparator" parent="GUI/MarginContainer/HBoxContainer"]
custom_minimum_size = Vector2(25, 0)
layout_mode = 2

[node name="Mode" type="HBoxContainer" parent="GUI/MarginContainer/HBoxContainer"]
layout_mode = 2

[node name="VertexMode" type="Button" parent="GUI/MarginContainer/HBoxContainer/Mode"]
layout_mode = 2
toggle_mode = true
button_pressed = true
button_group = ExtResource("2_mtsu3")
text = "Vertex mode"

[node name="EdgeMode" type="Button" parent="GUI/MarginContainer/HBoxContainer/Mode"]
layout_mode = 2
size_flags_vertical = 3
toggle_mode = true
button_group = ExtResource("2_mtsu3")
text = "Edge mode"

[node name="HSeparator2" type="HSeparator" parent="GUI/MarginContainer/HBoxContainer"]
custom_minimum_size = Vector2(25, 0)
layout_mode = 2

[node name="SaveLoad" type="HBoxContainer" parent="GUI/MarginContainer/HBoxContainer"]
layout_mode = 2

[node name="SaveGraph" type="Button" parent="GUI/MarginContainer/HBoxContainer/SaveLoad"]
layout_mode = 2
text = "Save Graph"

[node name="LoadGraph" type="Button" parent="GUI/MarginContainer/HBoxContainer/SaveLoad"]
layout_mode = 2
text = "Load Graph"

[node name="HSeparator3" type="HSeparator" parent="GUI/MarginContainer/HBoxContainer"]
custom_minimum_size = Vector2(25, 0)
layout_mode = 2

[node name="PauseButton" parent="GUI/MarginContainer/HBoxContainer" instance=ExtResource("3_fkwqj")]
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="GUI/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 0

[node name="TabContainer" type="TabContainer" parent="GUI/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="Actions" type="MarginContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="ActionsSidebar" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions"]
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar"]
layout_mode = 2

[node name="Label" type="Label" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer"]
layout_mode = 2
text = "Graph properties:"

[node name="HBoxContainer" type="HBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer"]
layout_mode = 2

[node name="HSeparator" type="Control" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer/HBoxContainer"]
custom_minimum_size = Vector2(15, 0)
layout_mode = 2

[node name="GraphProperties" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="MakeReflexive" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer/HBoxContainer/GraphProperties"]
layout_mode = 2
text = "Make reflexive"

[node name="MakeUndirected" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer/HBoxContainer/GraphProperties"]
layout_mode = 2
text = "Make undirected"

[node name="VBoxContainer2" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar"]
layout_mode = 2

[node name="Label2" type="Label" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2"]
layout_mode = 2
text = "Graph actions:"

[node name="HBoxContainer" type="HBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2"]
layout_mode = 2

[node name="HSeparator" type="Control" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer"]
custom_minimum_size = Vector2(15, 0)
layout_mode = 2

[node name="GraphActions" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Fill" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions"]
layout_mode = 2
text = "Fill"

[node name="Clear" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions"]
layout_mode = 2
text = "Clear"

[node name="Invert" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions"]
layout_mode = 2
text = "Invert"

[node name="Square" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions"]
layout_mode = 2
text = "Square"

[node name="RetractStrictCorners" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions"]
layout_mode = 2
text = "Retract strict corners"

[node name="RetractCorners" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions"]
layout_mode = 2
text = "Retract corners"

[node name="VBoxContainer3" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar"]
layout_mode = 2

[node name="Label" type="Label" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3"]
layout_mode = 2
text = "Other:"

[node name="HBoxContainer" type="HBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3"]
layout_mode = 2

[node name="HSeparator" type="Control" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer"]
custom_minimum_size = Vector2(15, 0)
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer"]
layout_mode = 2

[node name="AddCorner" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer"]
layout_mode = 2

[node name="Button" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer/AddCorner"]
layout_mode = 2
text = "Add corner"

[node name="Button2" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer/AddCorner"]
layout_mode = 2
text = "Add strict corner"

[node name="HBoxContainer" type="HBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer/AddCorner"]
layout_mode = 2

[node name="HSeparator" type="Control" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer/AddCorner/HBoxContainer"]
custom_minimum_size = Vector2(25, 0)
layout_mode = 2

[node name="SpinBox" type="SpinBox" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer/AddCorner/HBoxContainer"]
custom_minimum_size = Vector2(123, 0)
layout_mode = 2
size_flags_horizontal = 3
max_value = 1.0
step = 0.05
value = 0.5
prefix = "Prob = "

[node name="OrganizeByRankingButton" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer"]
layout_mode = 2
text = "Organize by ranking"

[node name="Misc" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar"]
visible = false
layout_mode = 2

[node name="Label2" type="Label" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/Misc"]
layout_mode = 2
text = "Miscellaneous:"

[node name="HBoxContainer" type="HBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/Misc"]
layout_mode = 2

[node name="HSeparator" type="Control" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/Misc/HBoxContainer"]
custom_minimum_size = Vector2(25, 0)
layout_mode = 2

[node name="GraphActions" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/Misc/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="PrintMappings" type="Button" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/Misc/HBoxContainer/GraphActions"]
layout_mode = 2
text = "Print mappings"

[node name="Text" type="MarginContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer"]
visible = false
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="TextSidebar" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Text"]
custom_minimum_size = Vector2(256, 0)
layout_mode = 2

[node name="TitleTextEdit" type="TextEdit" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Text/TextSidebar"]
layout_mode = 2
theme_override_font_sizes/font_size = 16
placeholder_text = "Title"
wrap_mode = 1
scroll_fit_content_height = true

[node name="AuthorTextEdit" type="TextEdit" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Text/TextSidebar"]
layout_mode = 2
theme_override_font_sizes/font_size = 16
placeholder_text = "Author"
wrap_mode = 1
scroll_fit_content_height = true

[node name="DescriptionTextEdit" type="TextEdit" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Text/TextSidebar"]
layout_mode = 2
theme_override_font_sizes/font_size = 16
placeholder_text = "Description"
wrap_mode = 1
scroll_fit_content_height = true

[node name="CitationTextEdit" type="TextEdit" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Text/TextSidebar"]
layout_mode = 2
theme_override_font_sizes/font_size = 16
placeholder_text = "Citation"
wrap_mode = 1
scroll_fit_content_height = true

[node name="Properties" type="MarginContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer"]
visible = false
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBoxContainer" type="VBoxContainer" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Properties"]
custom_minimum_size = Vector2(256, 0)
layout_mode = 2

[node name="SpinBox" type="SpinBox" parent="GUI/MarginContainer/VBoxContainer/TabContainer/Properties/VBoxContainer"]
layout_mode = 2
prefix = "Camera zoom:   "

[node name="PanelContainer" type="PanelContainer" parent="GUI/MarginContainer"]
visible = false
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8

[node name="MarginContainer" type="MarginContainer" parent="GUI/MarginContainer/PanelContainer"]
custom_minimum_size = Vector2(200, 0)
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBoxContainer" type="VBoxContainer" parent="GUI/MarginContainer/PanelContainer/MarginContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="GUI/MarginContainer/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Graph display:"
horizontal_alignment = 1

[node name="GraphTextDisplay" type="Label" parent="GUI/MarginContainer/PanelContainer/MarginContainer/VBoxContainer"]
layout_mode = 2
theme_override_font_sizes/font_size = 10
horizontal_alignment = 1

[node name="SelectedLabel" type="Label" parent="GUI/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 8
size_flags_vertical = 8
horizontal_alignment = 2

[node name="Graph" parent="." node_paths=PackedStringArray("graph_data_display_label") instance=ExtResource("4_lemyg")]
graph_data_display_label = NodePath("../GUI/MarginContainer/PanelContainer/MarginContainer/VBoxContainer/GraphTextDisplay")

[node name="SaveFileDialog" type="FileDialog" parent="."]
position = Vector2i(300, 100)
size = Vector2i(500, 400)
content_scale_mode = 2
content_scale_aspect = 1
ok_button_text = "Save"
root_subfolder = "Graphs"
filters = PackedStringArray("*.json")

[node name="LoadFileDialog" type="FileDialog" parent="."]
title = "Open a File or Directory"
position = Vector2i(300, 100)
size = Vector2i(500, 400)
content_scale_mode = 2
content_scale_aspect = 1
ok_button_text = "Open"
file_mode = 3
root_subfolder = "Graphs"
filters = PackedStringArray("*.csv", "*.tsv", "*.json")

[node name="VertexSpawnPosition" type="Node2D" parent="."]
position = Vector2(580, 324)
script = ExtResource("5_3ulu6")

[node name="Area2D" type="Area2D" parent="VertexSpawnPosition"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="VertexSpawnPosition/Area2D"]
shape = SubResource("RectangleShape2D_nxaq5")

[node name="NewEdgeLine" type="Line2D" parent="."]
default_color = Color(0.192157, 0.639216, 1, 1)

[node name="MusicPlayer" parent="." instance=ExtResource("6_vbmlc")]
music_track_name = "music_editor"

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0

[connection signal="pressed" from="GUI/MarginContainer/HBoxContainer/Buttons/AddVertex" to="." method="add_vertex"]
[connection signal="pressed" from="GUI/MarginContainer/HBoxContainer/Buttons/Refresh" to="." method="refresh"]
[connection signal="pressed" from="GUI/MarginContainer/HBoxContainer/Mode/VertexMode" to="." method="set_vertex_mode"]
[connection signal="pressed" from="GUI/MarginContainer/HBoxContainer/Mode/EdgeMode" to="." method="set_edge_mode"]
[connection signal="pressed" from="GUI/MarginContainer/HBoxContainer/SaveLoad/SaveGraph" to="SaveFileDialog" method="show"]
[connection signal="pressed" from="GUI/MarginContainer/HBoxContainer/SaveLoad/LoadGraph" to="LoadFileDialog" method="show"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer/HBoxContainer/GraphProperties/MakeReflexive" to="." method="make_reflexive"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer/HBoxContainer/GraphProperties/MakeUndirected" to="." method="make_undirected"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions/Fill" to="." method="fill"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions/Clear" to="." method="clear"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions/Invert" to="." method="invert"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions/Square" to="." method="square"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions/RetractStrictCorners" to="." method="retract_strict_corners"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer2/HBoxContainer/GraphActions/RetractCorners" to="." method="retract_corners"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer/AddCorner/Button" to="." method="add_corner"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer/AddCorner/Button2" to="." method="add_strict_corner"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/VBoxContainer3/HBoxContainer/VBoxContainer/OrganizeByRankingButton" to="." method="organize_by_ranking"]
[connection signal="pressed" from="GUI/MarginContainer/VBoxContainer/TabContainer/Actions/ActionsSidebar/Misc/HBoxContainer/GraphActions/PrintMappings" to="." method="print_mappings"]
